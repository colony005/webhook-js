/*! webhook - v - 2014-02-10
* https://github.com//webhook
* Copyright (c) 2014 ; Licensed MIT */
!function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={init:function(b,c){this.$element=a(b),this.options=this.getOptions(c),this.$window=a(window),this.options.offset.top||(this.options.offset.top=this.$element.offset().top-10),this.$window.on({"scroll.affix":a.proxy(this.checkPosition,this),"click.affix":a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)}),this.initialwidth=this.$element.width()===this.$element.parent().width()?"auto":this.$element.width(),this.checkPosition()},getOptions:function(b){return a.extend({},a.fn.affix.defaults,this.$element.data(),b)},checkPosition:function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="wy-affix wy-affix-top wy-affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=this.$element.height()>=this.$window.height()?"top":this.options.minWidth>=this.$window.width()?"top":null!==this.unpin&&d+this.unpin<=e.top?!1:null!==g&&e.top+this.$element.height()>=c-g?"bottom":null!==h&&h>=d?"top":!1,this.affixed!==b&&(this.$element.width(b?this.initialWidth:this.$element.width()),this.affixed=b,this.unpin="bottom"===b?e.top-d:null,this.$element.removeClass(i).addClass("wy-affix"+(b?"-"+b:"")),this.$element.trigger("affix",b))}}},a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:{},minWidth:480,minHeight:function(){}},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),function(a){"use strict";var b={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,SHIFT:16,CTRL:17,ALT:18},c=function(a,b){this.init(a,b)};c.prototype={init:function(b,c){this.$element=a(b).prop("readonly",!0),this.$tagGroup=a('<div class="wy-tag-input-group">').insertAfter(this.$element),this.$autocompleteGroup=a('<div class="wy-autocomplete-group">').appendTo(this.$tagGroup),this.$input=a('<input type="text" autocomplete="off">').appendTo(this.$autocompleteGroup),this.$results=a('<div class="wy-autocomplete-dropdown">').append("<ul>"),this.options=this.getOptions(c),this.selected=[],this.$selected=a([]),this.keyedData={},this.$input.attr("placeholder",this.options.placeholder||this.$element.attr("placeholder")),this.listen(),this.getSource(this.options.source)},getOptions:function(b){return a.extend({},a.fn.autocomplete.defaults,this.$element.data(),b)},getSource:function(b){"object"==typeof b?this.setData(this.options.formatSource(b)):"string"==typeof b&&a.getJSON(b).done(a.proxy(function(a){this.setData(this.options.formatSource(a))},this))},setData:function(b){this.data=b,this.formattedData=this.options.formatData(b),a.each(this.data,a.proxy(function(a,b){this.keyedData[this.options.formatSelect(b)]=b},this)),this.$element.val()&&a.each(this.$element.val().split(","),a.proxy(function(a,b){this.selectItem(this.keyedData[b])},this))},listen:function(){this.$input.on({"keydown.autocomplete":a.proxy(this.keydown,this),"keyup.autocomplete":a.proxy(this.keyup,this)}),this.$results.on("mouseenter.autocomplete","li",function(){a(this).addClass("on").siblings().removeClass("on")}),this.$results.on("click.autocomplete","li",a.proxy(this.selectCurrent,this)),this.$element.on({"selectItem.autocomplete":a.proxy(function(b,c){var d=a('<span class="wy-tag">').text(this.options.formatDisplay(c)).data("item",c).attr("data-val",this.options.formatSelect(c)).insertBefore(this.$autocompleteGroup);a('<a class="wy-tag-remove">').appendTo(d).on("click",a.proxy(function(){this.removeItem(c)},this)),this.$selected=this.$selected.add(d)},this),"removeItem.autocomplete":a.proxy(function(a,b){this.$selected.filter('[data-val="'+this.options.formatSelect(b)+'"]').remove()},this)})},keydown:function(a){switch(a.keyCode){case b.UP:a.preventDefault(),this.prev();break;case b.DOWN:a.preventDefault(),this.next();break;case b.TAB:case b.ENTER:case b.ESCAPE:a.preventDefault()}},keyup:function(a){switch(a.keyCode){case b.UP:case b.DOWN:case b.CTRL:case b.SHIFT:case b.ALT:break;case b.ENTER:this.selectCurrent();break;case b.ESCAPE:this.hide();break;default:this.search(this.$input.val())}a.stopPropagation(),a.preventDefault()},search:function(a){return this.query=a||this.$input.val(),this.query.length<this.options.minLength?this.hide():this.process(this.formattedData.slice())},process:function(a){return a=this.match(a),a=this.sort(a),this.render(a.slice(0,this.options.perPage)).show()},match:function(b){var c=this.query.toLowerCase(),d=this.matched=[];return a.grep(b,function(a,b){return~a.toLowerCase().indexOf(c)&&d.push(b)})},sort:function(a){for(var b,c,d=[],e=[],f=[],g=0;b=a.shift();)c=this.matched[g++],b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?e.push(c):f.push(c):d.push(c);return d.concat(e,f)},next:function(){var a=this.$results.find(".on").removeClass("on"),b=a.next();b.length||(b=this.$results.find("li").first()),b.addClass("on")},prev:function(){var a=this.$results.find(".on").removeClass("on"),b=a.prev();b.length||(b=this.$results.find("li").last()),b.addClass("on")},selectCurrent:function(){return this.selectItem(this.$results.find(".on").data("item"))},selectItem:function(a){var b=this.options.formatSelect(a);return~this.selected.indexOf(b)?this:this.options.limit&&this.selected.length>=this.options.limit?this:(1===this.options.limit?this.selected=[b]:this.selected.push(b),this.updateSelection(),this.$element.trigger("selectItem.autocomplete",a),this.hide(),this.$input.val(""),this)},updateSelection:function(){this.$element.val(this.selected.join(this.options.separator)).trigger("change")},removeItem:function(a){return this.selected.splice(this.selected.indexOf(this.options.formatSelect(a)),1),this.updateSelection(),this.$element.trigger("removeItem.autocomplete",a),this},render:function(b){return this.$results.find("ul").empty(),a.each(b,a.proxy(function(b,c){a("<li>").text(this.options.formatDisplay(this.data[c])).data("item",this.data[c]).appendTo(this.$results.find("ul"))},this)),this.$results.find("li").first().addClass("on"),this},show:function(){return this.$results.is(":empty")||this.$results.appendTo(this.$autocompleteGroup),this},hide:function(){return this.$results.detach(),this}},a.fn.autocomplete=function(b){return this.each(function(){var d=a(this),e=d.data("autocomplete"),f="object"==typeof b&&b;e||d.data("autocomplete",e=new c(this,f)),"string"==typeof b&&e[b]()})},a.fn.autocomplete.Constructor=c,a.fn.autocomplete.defaults={separator:",",limit:1,perPage:10,minLength:2,formatSource:function(a){return a},formatData:function(a){return a},formatDisplay:function(a){return a},formatSelect:function(a){return a}},a(window).on("load",function(){a("[data-provide=autocomplete]").each(function(){var b=a(this),c=b.data();b.autocomplete(c)})})}(window.jQuery),function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={init:function(b,c){this.isPolyfill="datetime-local"!==b.type,this.$element=a(b),this.options=this.getOptions(c),a('<button type="button" class="btn btn-link">Now</button>').insertAfter(this.$element).on("click",a.proxy(this.setNow,this)),(!a.fn.datetime.defaults.polyfill||this.isPolyfill)&&(this.$element.attr("placeholder",this.options.format),this.setDatetime(this.$element.val()),this.updateInput(),this.$element.on({"focus.datetime":a.proxy(this.show,this),"keyup.datetime":a.proxy(this.tryDatetime,this),"change.datetime":a.proxy(this.tryDatetime,this),"click.datetime":function(a){a.stopPropagation()}}),a(document).on("click.datetime",a.proxy(this.hide,this)))},getOptions:function(b){return a.extend({},a.fn.datetime.defaults,this.$element.data(),b)},tryDatetime:function(){var a=moment(this.$element.val());a&&a.isValid()&&this.show()},setNow:function(){this.setDatetime(moment())},setDatetime:function(a){this.datetime=moment(a),this.updateInput()},getDatetime:function(){return this.datetime},getFormattedDatetime:function(){var a=this.isPolyfill?this.options.format:"YYYY-MM-DDTHH:mm";return this.datetime&&this.datetime.format(a)},updateInput:function(){this.$element.val(this.getFormattedDatetime()),this.$element.trigger("change")},calendar:function(){if(this.datetimeDate===this.datetime)return this.$calendar;this.datetimeDate&&this.$calendar.remove(),this.datetimeDate=this.datetime||moment();var b,c,d,e,f=this.datetimeDate.daysInMonth(),g=moment(this.datetimeDate).date(1).day(),h=Math.ceil((g+f)/7),i=this.datetimeDate.date(),j=moment(),k=j.month()===this.datetimeDate.month()&&j.year()===this.datetimeDate.year()&&moment().date(),l=1,m="";for(b="<header>",b+="<span>"+this.datetimeDate.format("MMMM YYYY")+"</span>",b+="<nav><button data-prev>&lt;</button><button data-today>&middot;</button><button data-next>&gt;</button></nav>",b+="</header>",b+="<table><thead><tr>",d=0;7>d;d++)c=moment(this.datetimeDate).day(d).format("ddd"),b+="<th>"+c+"</th>";for(b+="</tr></thead>",b+="<tbody>",e=0;h>e;e++){for(b+="<tr>",d=0;7>d;d++)m=l>g&&f+g>=l?l-g:"",b+=m===k?'<td class="today">':"<td>",b+=m===i?"<strong>"+m+"</strong>":m,b+="</td>",l++;b+="</tr>"}return b+="</tbody></table>",this.$calendar=a("<div class='wy-datetime'>"+b+"</div>"),this.$calendar.on("click.datetime.day","td:not(:empty)",a.proxy(function(b){var c=moment(this.datetimeDate).date(parseInt(a(b.target).text(),10));c&&c.isValid()&&this.setDatetime(c)},this)),this.$calendar.on("click.datetime.nav","button",a.proxy(function(b){var c,d=a(b.target).data();void 0!==d.prev?c=moment(this.datetimeDate).subtract("months",1):void 0!==d.next?c=moment(this.datetimeDate).add("months",1):void 0!==d.today&&(c=moment()),this.setDatetime(c)},this)),this.$calendar.on("click.datetime",function(a){a.stopPropagation()}),this.$calendar},widget:function(){return this.calendar()},show:function(){var a=this.calendar(),b=this.$element.offset();a.appendTo("body"),a.offset({top:b.top+this.$element.outerHeight(),left:b.left})},hide:function(){var a=this.calendar();a.detach()}},a.fn.datetime=function(c){return"string"==typeof c&&"widget"===c?a(this).data("datetime")[c]():this.each(function(){var d=a(this),e=d.data("datetime"),f="object"==typeof c&&c;e||d.data("datetime",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.datetime.Constructor=b,a.fn.datetime.defaults={polyfill:!0,format:"MM/DD/YYYY hh:mm A"},a(window).on("load",function(){a("[type=datetime-local]").each(function(){var b=a(this),c=b.data();b.datetime(c)})})}(window.jQuery),function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={init:function(b,c){this.$element=a(b),this.options=this.getOptions(c)},getOptions:function(b){return a.extend({},a.fn.tab.defaults,this.$element.closest("[data-toggle-group]").data(),this.$element.data(),b)},show:function(){var b,c,d,e;this.$element.closest("[data-toggle-group]").find("[data-toggle]").parent().removeClass(this.options.activetabclass),this.$element.parent().addClass(this.options.activetabclass),b=this.$element.attr("href"),b=b&&b.replace(/.*(?=#[^\s]*$)/,""),c=a(b),d=c.closest("[data-toggle-target-group]"),e=a.extend({},this.options,d.data()),d.children().removeClass(e.activepaneclass),c.addClass(e.activepaneclass)}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab"),f="object"==typeof c&&c;e||d.data("tab",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.defaults={activetabclass:"active",activepaneclass:"active"},a(document).on("click.tab.data-api","[data-toggle=tab]",function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.fixTitle(),this.$element.on("mouseenter.tooltip",a.proxy(this.show,this)),this.$element.on("mouseleave.tooltip",a.proxy(this.hide,this))},getOptions:function(b){return a.extend({},a.fn[this.type].defaults,this.$element.data(),b)},fixTitle:function(){var a=this.$element;a.attr("data-original-title",this.options.title||a.attr("title")||"").attr("title","")},getTitle:function(){return this.$element.attr("data-original-title")},tip:function(){return this.$tip=this.$tip||a(this.options.template)},adjustPosition:function(){var a=this.tip(),b=this.$element.offset(),c={},d=this.options.placement;("top"===d||"bottom"===d)&&(c.left=b.left-(a.outerWidth()-this.$element.outerWidth())/2),("right"===d||"left"===d)&&(c.top=b.top-(a.outerHeight()-this.$element.outerHeight())/2),"top"===d&&(c.top=b.top-a.outerHeight()-5),"bottom"===d&&(c.top=b.top+this.$element.outerHeight()+5),"right"===d&&(c.left=b.left+this.$element.outerWidth()+5),"left"===d&&(c.left=b.left-this.$tip.outerWidth()-5),a.offset(c).removeClass("top right bottom left").addClass(d)},setContent:function(a){this.tip().find(".wy-tooltip-inner")[this.options.html?"html":"text"](a||this.getTitle())},show:function(){var a=this.tip();this.setContent(),a.addClass("on"),a.insertAfter(this.$element),this.adjustPosition()},hide:function(){var a=this.tip();a.removeClass("on"),a.detach()},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={placement:"top",template:'<div class="wy-tooltip"><div class="wy-tooltip-arrow"></div><div class="wy-tooltip-inner"></div></div>',title:"",html:!1},a(window).on("load",function(){a('[data-toggle="tooltip"]').each(function(){var b=a(this),c=b.data();b.tooltip(c)})})}(window.jQuery),function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={init:function(b,c){this.$element=a(b),this.options=this.getOptions(c);var d=this;return this.$fileinput=a('<input type="file" multiple>').hide().insertAfter(b).on({change:function(){d.upload(this.files)},click:function(a){a.stopPropagation()}}),this.initTriggers(),this.initDropzones(),[b,c]},getOptions:function(b){return a.extend({},a.fn.upload.defaults,this.$element.data(),b)},initTriggers:function(){a("[data-upload-trigger='"+this.options.uploadGroup+"'] .image-desktop").on("click",a.proxy(function(){this.$fileinput.trigger("click.wh.upload")},this)),this.$element.on("keyup",a.proxy(function(){var a=new XMLHttpRequest;a.open("GET","/path/to/image.png",!0),a.responseType="blob",a.onload=function(){if(200===this.status){var a=new Blob([this.response],{type:"image/png"});window.console.log(a)}},a.send()},this))},initDropzones:function(){var b=this.$dropzone=a("[data-upload-dropzone='"+this.options.uploadGroup+"']");if(b.length){var c=0;a(window).on({dragover:a.proxy(function(a){a.preventDefault(),this.$element.trigger("dragover.wh.upload")},this),dragenter:a.proxy(function(a){a.preventDefault(),c++,c&&this.$element.trigger("dragenter.wh.upload")},this),dragleave:a.proxy(function(a){a.preventDefault(),c--,c||this.$element.trigger("dragleave.wh.upload")},this),drop:a.proxy(function(a){a.preventDefault(),c--,this.$element.trigger("dragdrop.wh.upload")},this)});var d=0;b.on({dragover:function(a){a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="copy"},dragenter:a.proxy(function(a){a.preventDefault(),d++,d&&this.$element.trigger("dragenterdropzone.wh.upload")},this),dragleave:a.proxy(function(a){a.preventDefault(),d--,d||this.$element.trigger("dragleavedropzone.wh.upload")},this),drop:a.proxy(function(a){a.preventDefault(),d--,this.$element.trigger("dragdropdropzone.wh.upload"),this.upload(a.originalEvent.dataTransfer.files)},this)})}},upload:function(b){if(this.file=b[0],!this.file)return void this.$element.trigger("error.wh.upload","No file selected.");if(this.$element.trigger("start.wh.upload"),!this.options.uploadUrl)return void this.$element.trigger("error.wh.upload","No upload url specified.");var c=new FormData;c.append("payload",this.file),c.append("site",this.options.uploadSite),c.append("token",this.options.uploadToken);var d=this;a.ajax({xhr:function(){var a=new window.XMLHttpRequest;return a.upload.addEventListener("progress",function(a){a.lengthComputable&&d.$element.trigger("progress.wh.upload",Math.ceil(100*a.loaded/a.total))},!1),a},url:this.options.uploadUrl,type:"post",data:c,dataType:"json",contentType:!1,processData:!1}).done(a.proxy(function(a){this.$element.trigger("load.wh.upload",a)},this)).fail(a.proxy(function(a){this.$element.trigger("error.wh.upload",a)},this)),this.createThumbnail(this.file,a.proxy(function(a){this.$element.trigger("thumb.wh.upload",a)},this))},createThumbnail:function(b,c){var d=a("<img>").attr({src:(window.URL||window.webkitURL).createObjectURL(b)}).css({"max-width":this.options.thumbmax,"max-height":this.options.thumbmax}),e=new FileReader;e.onload=function(b){try{var e=new ExifReader,f=1;switch(e.load(b.target.result),f=e.getTagValue("Orientation")){case 3:case 4:d.addClass("rotate-180");break;case 5:case 6:d.addClass("rotate-90");break;case 7:case 8:d.addClass("rotate-270")}a.inArray(f,[2,4,5,7])>=0&&d.addClass("flip-h")}catch(g){window.console.log(g)}c(d)},e.readAsArrayBuffer(b)}},a.fn.upload=function(c){return this.each(function(){var d=a(this),e=d.data("upload"),f="object"==typeof c&&c;e||d.data("upload",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.upload.Constructor=b,a.fn.upload.defaults={thumbmax:100},a(window).on("load",function(){a("[data-upload]:input").each(function(){var b=a(this),c=b.data();b.upload(c)})})}(window.jQuery);